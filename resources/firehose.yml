Type: AWS::KinesisFirehose::DeliveryStream
Properties:
  DeliveryStreamType: DirectPut
  ExtendedS3DestinationConfiguration:
    BucketARN: !GetAtt LogBucket.Arn
    RoleARN: !GetAtt FirehoseRole.Arn
    Prefix: "logs/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/hour=!{timestamp:HH}/"
    ErrorOutputPrefix: "logs-errors/!{firehose:error-output-type}/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/hour=!{timestamp:HH}/"
    CompressionFormat: GZIP
    ProcessingConfiguration:
      Enabled: true
      Processors:
        - Type: Decompression
          Parameters:
            - ParameterName: CompressionFormat
              ParameterValue: GZIP
        - Type: AppendDelimiterToRecord
          Parameters:
            - ParameterName: Delimiter
              ParameterValue: "\n"
    BufferingHints:
      SizeInMBs: 1
      IntervalInSeconds: 60
